<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ì½”ì¼“ë°°ì†¡ ê¸°ì–µë ¥ í…ŒìŠ¤íŠ¸ ê²Œì„</title>
  <style>
    * { box-sizing: border-box; }
    body { margin: 0; font-family: sans-serif; }

    /* Intro í™”ë©´ */
    #intro {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: url('intro-background.png') no-repeat center center;
      background-size: cover;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      color: #333;
    }
    #intro h1 { font-size: 2em; margin-bottom: 0.5em; }
    #intro p { font-size: 1em; margin-bottom: 1.5em; }
    #startBtn {
      background: #ffd54f;
      border: none;
      padding: 0.75em 1.5em;
      font-size: 1.25em;
      border-radius: 25px;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }

    /* ê²Œì„ í™”ë©´ ìˆ¨ê¹€ ì²˜ë¦¬ */
    #game { display: none; }
    #endScreen {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: #fff; color: #333;
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px;
    }
    #endScreen h1 { font-size: 2em; margin-bottom: 0.5em; color: #555; }
    #endScreen p { font-size: 1.1em; margin: 0.3em 0; }
    #retryBtn { margin-top: 1.5em; background: #f48fb1; border: none; padding: 0.75em 1.5em; font-size: 1.25em; border-radius: 8px; cursor: pointer; }

    body.game-active { overflow: auto; }
    body.game-active #intro { display: none; }
    body.game-active #game { display: block; }

    /* ê²Œì„ UI */
    body.game-active { text-align: center; padding: 10px; background: url('1.jpg') no-repeat center center fixed; background-size: cover; color: white; }
    .overlay {
      background: rgba(255,255,255,0.7);
      color: #000;
      display: inline-block;
      padding: 5px 10px;
      border-radius: 5px;
      margin: 5px;
    }
    h1.game-title { font-size: 1.5em; text-shadow: 1px 1px 3px rgba(0,0,0,0.7); }
    #board {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 10px;
      max-width: 420px;
      margin: 20px auto;
    }
    .card {
      width: 100%; aspect-ratio: 1;
      border-radius: 10px;
      cursor: pointer;
      background: url('2.jpg') no-repeat center center;
      background-size: cover;
      transition: transform 0.3s;
      display: flex; align-items: center; justify-content: center;
      font-size: 2em; color: transparent; user-select: none;
    }
    .card.flipped, .card.matched {
      background: #fff !important; color: black !important; transform: rotateY(180deg);
    }
    .matched { background: limegreen !important; color: white !important; }
  </style>
</head>
<body>
  <!-- Intro Screen -->
  <div id="intro">
    <h1>ì½”ì¼“ë°°ì†¡ ê¸°ì–µë ¥ í…ŒìŠ¤íŠ¸</h1>
    <p>â¤ï¸ 90ì´ˆ ì•ˆì— ê°™ì€ì¹´ë“œë¥¼ ì°¾ìœ¼ì„¸ìš”. â¤ï¸<br>ê°™ì€ì¹´ë“œ ì°¾ì„ì‹œ 10ì´ˆ ì¶”ê°€ë©ë‹ˆë‹¤</p>
    <p>Â© 2025 ì½”ì¼“ê²Œì„ì¦ˆ. All rights reserved.</p>
    <p>ìœ íŠœë¸Œ 'ê±¸ì½”_Gulko' ì €ì‘ê¶Œ ì½˜í…ì¸ ì…ë‹ˆë‹¤.</p>
    <p><a href="https://www.youtube.com/@Gulko" target="_blank">https://www.youtube.com/@Gulko</a></p>
    <button id="startBtn">í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
  </div>

  <!-- Game Content -->
  <div id="game">
    <div class="overlay">
      <h1 class="game-title">ì½”ì¼“ë°°ì†¡ ê¸°ì–µë ¥ í…ŒìŠ¤íŠ¸</h1>
      <p>ê°™ì€ ê·¸ë¦¼ì„ ì°¾ì•„ ì§ì„ ë§ì¶°ë³´ì„¸ìš”!</p>
      <p>ìœ íŠœë¸Œ 'ê±¸ì½”_Gulko' ì €ì‘ê¶Œ ì½˜í…ì¸ ì…ë‹ˆë‹¤.</p>
      <p><a href="https://www.youtube.com/@Gulko" target="_blank">https://www.youtube.com/@Gulko</a></p>
      <div id="timer" class="overlay">ë‚¨ì€ ì‹œê°„: 90ì´ˆ</div>
      <div id="misses" class="overlay">í‹€ë¦° íšŸìˆ˜: 0íšŒ</div>
      <div id="score" class="overlay">ì ìˆ˜: 0</div>
    </div>
    <div id="board"></div>

    <!-- ì˜¤ë””ì˜¤ ìš”ì†Œ -->
    <audio id="bgMusic" src="1.mp3" loop></audio>
    <audio id="matchSound" src="2.mp3"></audio>
    <audio id="wrongSound" src="3.mp3"></audio>
    <audio id="endSound" src="4.mp3"></audio>
  </div>

  <!-- End Screen -->
  <div id="endScreen">
    <h1>ê²Œì„ ì˜¤ë²„! ğŸ˜¢</h1>
    <p>ìµœì¢… ì ìˆ˜: <span id="finalScore">0</span></p>
    <p>ì½”íŒ¡ êµ¬ì…ì€ ê±¸ì½”ì™€ í•¨ê»˜</p>
    <p><a href="https://www.youtube.com/@Gulko" target="_blank">https://www.youtube.com/@Gulko</a></p>
    <p>ì‚¬ë‘í•©ë‹ˆë‹¤. ê³ ê°ë‹˜</p>
    <button id="retryBtn">ë‹¤ì‹œ ì‹œì‘</button>
  </div>

  <script>
    const board = document.getElementById('board');
    const timerEl = document.getElementById('timer');
    const missesEl = document.getElementById('misses');
    const scoreEl = document.getElementById('score');
    const bgMusic = document.getElementById('bgMusic');
    const matchSound = document.getElementById('matchSound');
    const wrongSound = document.getElementById('wrongSound');
    const endSound = document.getElementById('endSound');
    const startBtn = document.getElementById('startBtn');
    const endScreen = document.getElementById('endScreen');
    const finalScoreEl = document.getElementById('finalScore');
    const retryBtn = document.getElementById('retryBtn');

    let cards = [], firstCard = null, secondCard = null, lock = false;
    let timeLeft = 90, misses = 0, score = 0, timerInterval;

    // ì¹´ë“œ ë‚´ìš© ë°°ì—´: ì›í•˜ëŠ” ëŒ€ë¡œ ë³€ê²½ ê°€ëŠ¥
    const cardContents = ['ğŸ','ğŸŒ','ğŸ‡','ğŸ“','ğŸ‰','ğŸ’','ğŸ','ğŸ¥','ğŸŠ','ğŸ‹','ğŸ¥­','ğŸ¥¥','ğŸˆ','ğŸ…','ğŸ¥‘','ğŸ¥¦','ğŸ¥¬','ğŸ¥’'];
    const rows = 6, cols = 6;
    const totalPairs = (rows * cols) / 2;

    startBtn.addEventListener('click', () => {
      endScreen.style.display = 'none';
      document.body.classList.add('game-active');
      bgMusic.currentTime = 0;
      bgMusic.play().catch(() => {});
      init();
    });

    retryBtn.addEventListener('click', () => {
      endScreen.style.display = 'none';
      score = 0; timeLeft = 90; misses = 0;
      bgMusic.currentTime = 0;
      bgMusic.play().catch(() => {});
      init();
    });

    function init() {
      board.innerHTML = '';
      firstCard = secondCard = null; lock = false;
      timeLeft = 90; misses = 0; score = 0;
      updateStatus();

      // ì¹´ë“œ ë± ìƒì„±
      const selected = [...cardContents].sort(() => 0.5 - Math.random()).slice(0, totalPairs);
      const deckContents = [...selected, ...selected].sort(() => 0.5 - Math.random());

      cards = deckContents.map((content) => {
        const card = document.createElement('div');
        card.className = 'card'; card.dataset.content = content;
        card.addEventListener('click', () => flipCard(card));
        board.appendChild(card);
        return card;
      });

      if (timerInterval) clearInterval(timerInterval);
      timerInterval = setInterval(() => {
        timeLeft--; updateStatus();
        if (timeLeft <= 0) endGame(false);
      }, 1000);
    }

    function updateStatus() {
      timerEl.textContent = `ë‚¨ì€ ì‹œê°„: ${timeLeft}ì´ˆ`;
      missesEl.textContent = `í‹€ë¦° íšŸìˆ˜: ${misses}íšŒ`;
      scoreEl.textContent = `ì ìˆ˜: ${score}`;
    }

    function flipCard(card) {
      if (lock || card.classList.contains('flipped') || card.classList.contains('matched')) return;
      if (bgMusic.paused) bgMusic.play().catch(() => {});

      card.classList.add('flipped'); card.textContent = card.dataset.content;
      if (!firstCard) firstCard = card;
      else {
        secondCard = card; lock = true;
        if (firstCard.dataset.content === secondCard.dataset.content) {
          firstCard.classList.add('matched'); secondCard.classList.add('matched');
          score += 10; timeLeft += 10;
          matchSound.currentTime = 0; matchSound.play();
          resetTurn(); updateStatus();
          if (cards.every(c => c.classList.contains('matched'))) endGame(true);
        } else {
          misses++; wrongSound.currentTime = 0; wrongSound.play();
          setTimeout(() => {
            firstCard.classList.remove('flipped'); secondCard.classList.remove('flipped');
            firstCard.textContent = ''; secondCard.textContent = '';
            resetTurn(); updateStatus();
          }, 800);
        }
      }
    }

    function resetTurn() { [firstCard, secondCard] = [null, null]; lock = false; }

    function endGame(win) {
      clearInterval(timerInterval); bgMusic.pause(); endSound.currentTime = 0; endSound.play();
      finalScoreEl.textContent = score;
      endScreen.querySelector('h1').textContent = win ? 'ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰' : 'ê²Œì„ ì˜¤ë²„! ğŸ˜¢';
      endScreen.style.display = 'flex';
    }
  </script>
</body>
</html>
